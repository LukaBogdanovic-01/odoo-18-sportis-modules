<odoo>
  <record id="action_player_other_agent_meetings" model="ir.actions.act_window">
      <field name="name">Meetings</field>
      <field name="res_model">calendar.event</field>
      <field name="view_mode">calendar,list,form</field>
      <field name="domain">
          [
            ('res_model', '=', 'player.other.agent'),
            ('res_id', '=', active_id)
          ]
      </field>
      <field name="context">
          {
            'default_res_model': 'player.other.agent',
            'default_res_id': active_id
          }
      </field>
  </record>



  <record id="view_player_other_agent_form" model="ir.ui.view">
    <field name="name">player.other.agent.form</field>
    <field name="model">player.other.agent</field>
    <field name="arch" type="xml">
      <form string="Player" class="o_form_view">
        <sheet>
        <div name="button_box" class="oe_button_box" invisible="not id">

            <button class="oe_stat_button"
                    type="action"
                    name="%(action_player_other_agent_meetings)d"
                    icon="fa-calendar">

                <div class="o_stat_info" style="display:flex; flex-direction:column;">
                    <span class="o_stat_text">
                        <field name="meeting_title"/>
                    </span>
                    <span class="o_stat_value">
                        <field name="meeting_date_label"/>
                    </span>
                </div>

            </button>

        </div>
        <!-- Statusbar -->
        <div class="d-flex justify-content-end mt-2">
          <field name="stage_id" widget="statusbar" options="{'clickable': True}" />
        </div>

  <div class="oe_title">
    <h1>
      <field name="name" placeholder="Name..." nolabel="1"/>
    </h1>
  </div>

  <group col="2">
    <!-- Lijeva kolona -->
    <group>
      <field name="active" invisible="1"/>
      <field name="sport"/>
      <field name="position"/>
      <field name="agent_id" invisible="1"/>
      <field name="origin_agent_id"/>
      <field name="contact"/>
      <div class="d-flex align-items-center gap-2">
                    <label for="phone" class="o_form_label me-5 sportis-strong-label">
                        Primary phone
                    </label>
                      <div style="min-width: 200px;">
                          <field name="phone" string="Primary phone"/>
                      </div>
                      <div>
                          <field name="phone_actions" widget="html" nolabel="1"/>
                      </div>
                  </div>
      <field name="email"/>
      <field name="country_id"/>
      <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
      <field name="priority" widget="priority"/>
      <field name="create_date" readonly="1"/>
      <field name="created_by" readonly="1"/>
    </group>

    <!-- Desna kolona -->
    <group>
      <field name="followup_by"/>
      <field name="file" widget="binary"/>
      <field name="image" widget="image" class="oe_avatar"
             style="width: 128px; height: 128px; border-radius: 8px;"
             options="{'preview_image': 'image'}"/>
      <field name="notes"/>
    </group>
  </group>

  <notebook>
    <page string="Career">
      <field name="career_ids"/>
    </page>
  </notebook>
</sheet>
<chatter/>
      </form>
    </field>
  </record>


  <record id="view_player_other_agent_list" model="ir.ui.view">
    <field name="name">player.other.agent.list</field>
    <field name="model">player.other.agent</field>
    <field name="arch" type="xml">
      <list string="Players (Other Agent)">
        <field name="name" optional="show"/>
        <field name="sport" optional="show"/>
        <field name="position" optional="show"/>
        <field name="agent_id" optional="show"/>
        <field name="origin_agent_id" optional="show"/>
        <field name="contact" optional="show"/>
        <field name="phone" optional="show"/>
        <field name="email" optional="show"/>
        <field name="country_id" optional="show"/>
        <field name="priority" optional="show"/>
        <field name="stage_id" optional="show"/>
        <field name="create_date" optional="show"/>
        <field name="created_by" optional="show"/>
      </list>
    </field>
  </record>

  <record id="view_player_other_agent_kanban" model="ir.ui.view">
    <field name="name">player.other.agent.kanban</field>
    <field name="model">player.other.agent</field>
    <field name="arch" type="xml">
        <kanban default_group_by="stage_id" class="o_kanban_mobile" default_order="priority desc">
            <field name="name"/>
            <field name="sport"/>
            <field name="position"/>
            <field name="agent_id"/>
            <field name="origin_agent_id"/>
            <field name="country_id"/>
            <field name="priority"/>
            <field name="tag_ids"/>
            <field name="phone_kanban"/>


            <templates>
                <t t-name="card">
                    <div class="oe_kanban_global_click o_kanban_card p-2">
                        <!-- Naslov -->
                        <div>
                            <strong><field name="name"/></strong>
                        </div>
                        <!-- Pozicija i Prioritet u istom redu -->
                        <div class="mt-2 d-flex justify-content-between align-items-center">
                            <div t-if="record.position.raw_value">
                                <i class="fa fa-briefcase text-muted" title="Position"/>
                                <field name="position"/>
                            </div>
                            <div t-if="record.priority.raw_value">
                                <field name="priority" widget="priority"/>
                            </div>
                        </div>
                        <!-- Ostali osnovni podaci -->
                        <div class="mt-2">
                            <div t-if="record.sport.raw_value">
                                <i class="fa fa-futbol-o text-muted" title="Sport"/>
                                <field name="sport"/>
                            </div>
                            <div t-if="record.origin_agent_id.raw_value">
                                <i class="fa fa-user-tie text-muted" title="Agent"/>
                                <field name="origin_agent_id"/>
                            </div>
                            <div t-if="record.country_id.raw_value">
                                <i class="fa fa-globe text-muted" title="Country"/>
                                <field name="country_id"/>
                            </div>
                            <div t-if="record.phone_kanban.raw_value" class="mt-2 text-muted">
                                <field name="phone_kanban" widget="html" nolabel="1"/>
                            </div>
                        </div>
                        <!-- TAGOVI na dnu -->
                        <div t-if="record.tag_ids.raw_value">
                            <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
                        </div>
                    </div>
                </t>
            </templates>
        </kanban>
    </field>
</record>


  <record id="view_player_other_agent_calendar" model="ir.ui.view">
    <field name="name">player.other.agent.calendar</field>
    <field name="model">player.other.agent</field>
    <field name="arch" type="xml">
      <calendar string="Players (Other Agent)"
                date_start="contract_date">
        <field name="name"/>
        <field name="sport"/>
        <field name="position"/>
        <field name="origin_agent_id"/>
      </calendar>
    </field>
  </record>

  <record id="view_player_other_agent_activity" model="ir.ui.view">
      <field name="name">player.other.agent.activity</field>
      <field name="model">player.other.agent</field>
      <field name="arch" type="xml">
          <activity string="Activities">
              <field name="name"/>
              <field name="origin_agent_id"/>
              <field name="country_id"/>
              <field name="priority"/>
              <field name="stage_id"/>
          </activity>
      </field>
  </record>

  <record id="view_player_other_agent_graph" model="ir.ui.view">
    <field name="name">player.other.agent.graph</field>
    <field name="model">player.other.agent</field>
    <field name="arch" type="xml">
      <graph string="Player Other Agents Analysis" type="bar">
        <field name="sport" type="row"/>
        <field name="country_id" type="col"/>
        <field name="id" type="measure"/>
      </graph>
    </field>
  </record>

  <record id="view_player_other_agent_pivot" model="ir.ui.view">
    <field name="name">player.other.agent.pivot</field>
    <field name="model">player.other.agent</field>
    <field name="arch" type="xml">
      <pivot string="Player Other Agents Analysis">
        <field name="country_id" type="row"/>
        <field name="sport" type="col"/>
        <field name="priority" type="col"/>
        <field name="id" type="measure"/>
      </pivot>
    </field>
  </record>






  <record id="action_export_other_agents" model="ir.actions.server">
      <field name="name">Export</field>
      <field name="model_id" ref="model_player_other_agent"/>
      <field name="binding_model_id" ref="model_player_other_agent"/>
      <field name="binding_type">action</field>
      <field name="binding_view_types">form</field>
      <field name="state">code</field>
      <field name="code">
          action = env['player.other.agent'].sudo().export_records()
      </field>
  </record>




  <record id="action_player_other_agent" model="ir.actions.act_window">
    <field name="name">Players_other_agent</field>
    <field name="res_model">player.other.agent</field>
    <field name="view_mode">kanban,list,form,graph,pivot,calendar,activity</field>
  </record>
</odoo>
