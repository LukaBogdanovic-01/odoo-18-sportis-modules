<odoo>
  <data>

    <record id="view_partner_form_inherit_custom" model="ir.ui.view">
      <field name="name">res.partner.form.inherit.custom</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_partner_form"/>
      <field name="priority" eval="500"/>
      <field name="arch" type="xml">

        <!-- Uklanjanje originalnog group[group] -->
        <xpath expr="//sheet/group[group]" position="replace">
          <div>

            <span>
              <field name="type" invisible="1"/>
            </span>

            <!-- INDIVIDUAL prikaz -->
            <div name="individual_block" invisible="is_company">
              <group>
                <field name="title"/>
                <field name="contact_qualification"/>
                <field name="decision_maker" widget="radio" options="{'horizontal': true}"/>
                <field name="phone" string="Primary phone"/>
                <field name="mobile"/>
                <field name="phone_secondary" string="Office phone"/>
                <field name="email"/>
                <field name="website" placeholder="e.g. https://www.example.com"/>
                <field name="category_id" widget="many2many_tags" placeholder="e.g. 'B2B', 'VIP', 'Consulting', ..."/>
                <field name="followup_by_id" widget="many2one_avatar_user"/>
                <field name="company_id" options="{'no_create': True}"/>
                <field name="lang" invisible="1"/>
                <field name="country_location"/>
              </group>
            </div>

            <!-- COMPANY prikaz -->
            <div name="company_block" invisible="not is_company">
              <group>
                <group>
                  <field name="x_nature_of_company" string="Nature of company"/>
                  <field name="level_of_playing" widget="radio" options="{'horizontal': true}" class="styled-radio-group"/>

                  <b>Adress</b>
                  <field name="street" placeholder="Street..."/>
                  <field name="street2" placeholder="Street 2..."/>
                  <div class="d-flex gap-2">
                    <field name="zip" placeholder="ZIP"/>
                    <field name="city" placeholder="City"/>
                    <field name="state_id" placeholder="State"/>
                  </div>
                  <field name="country_id" placeholder="Country"/>
                  <field name="vat" string="Tax ID" placeholder="e.g. BE0477472701"/>
                </group>

                <group>
                  <field name="phone" string="Primary phone"/>
                  <field name="mobile"/>
                  <field name="phone_secondary" string="Office phone"/>
                  <field name="email"/>
                  <field name="website" placeholder="e.g. https://www.example.com"/>
                  <field name="category_id" widget="many2many_tags"/>
                  <field name="followup_by_id" widget="many2one_avatar_user"/>
                  <field name="company_id" options="{'no_create': True}"/>
                  <field name="training_center" widget="boolean_toggle" string="Training center"/>
                  <field name="country_location"/>
                </group>

                <field name="lang" invisible="1"/>
              </group>
            </div>

          </div>
        </xpath>

        <!-- 1) Ukloni postojeći "Internal Notes" iz parenta -->
        <xpath expr="//sheet/notebook/page[@name='internal_notes']" position="replace"/>

        <!-- 2) Ubaci ga kao PRVI tab -->
        <xpath expr="//sheet/notebook/page[1]" position="before">
            <page name="internal_notes" string="Internal Notes">
                <field name="comment" placeholder="Internal notes..."/>
            </page>
        </xpath>

        <!-- 3️⃣ Ukloni polje 'company_id' iz Sales & Purchase → misc grupe -->
        <xpath expr="//page[@name='sales_purchases']//group[@name='misc']//field[@name='company_id']" position="replace"/>

        <xpath expr="//page[@name='sales_purchases']//group[@name='misc']//field[@name='website_id']" position="replace"/>

      </field>
    </record>

    <record id="view_partner_tree_me" model="ir.ui.view">
      <field name="name">res.partner.tree.me</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_partner_tree"/>
      <field name="arch" type="xml">
          <!-- Dodaj kolonu za tip partnera -->
          <xpath expr="//list/field[@name='phone']" position="before">
            <field name="company_type" string="Type" widget="selection"/>
        </xpath>
      </field>
  </record>



    <!-- ZA TODO CHATTER -->
    <record id="view_task_form_inherit_chatter" model="ir.ui.view">
      <field name="name">project.task.form.inherit.chatter</field>
      <field name="model">project.task</field>
      <field name="inherit_id" ref="project_todo.project_task_view_todo_form"/>
      <field name="arch" type="xml">
          <xpath expr="//form/sheet" position="after">
              <chatter/>
          </xpath>
      </field>
  </record>


  <record id="view_partner_kanban_me" model="ir.ui.view">
      <field name="name">res.partner.kanban.me</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.res_partner_kanban_view"/>
      <field name="arch" type="xml">

          <xpath expr="//kanban/templates/t/main/field[@name='email']" position="after">
              <field name="phone" string="Primary phone"/>
          </xpath>

      </field>
  </record>


  <!-- Akcija za export -->
  <record id="action_export_res_partners" model="ir.actions.server">
      <field name="name">Export</field>
      <field name="model_id" ref="base.model_res_partner"/>
      <field name="binding_model_id" ref="base.model_res_partner"/>
      <field name="binding_type">action</field>
      <field name="binding_view_types">form</field>
      <field name="state">code</field>
      <field name="code">
          action = env['res.partner'].sudo().export_records()
      </field>
  </record>



  </data>
</odoo>
